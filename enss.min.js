"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(v){for(var t,a=1,o=arguments.length;a<o;a++){t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(v[l]=t[l])}return v},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(v,t,a){if(a||arguments.length===2)for(var o=0,l=t.length,g;o<l;o++)(g||!(o in t))&&(g||(g=Array.prototype.slice.call(t,0,o)),g[o]=t[o]);return v.concat(g||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.extractNameEnumData=exports.omitEnumReverseMappings=exports.normalizeClass=void 0;var defaultConfig={elementSeparator:"-",conditionalSeparator:"--",strictBoolChecks:!0},config=__assign({},defaultConfig);function enss(v,t,a,o){var l,g=function(){return config.elementSeparator},h=function(){return config.conditionalSeparator};if(v=omitEnumReverseMappings(v),t=omitEnumReverseMappings(t),a=omitEnumReverseMappings(a),typeof o=="function"){var O={};o=(l=o(O))!==null&&l!==void 0?l:O}var S=extractNameEnumData(v,o),n=S[0],u=S[1],b=Object.entries(o!=null?o:[]),d=new Map(b);n&&d.set(n,u!=null?u:null),t=Object.fromEntries(Object.entries(t!=null?t:{}).map(function(f){var e=f[0],r=f[1],i=d.get(e);return i?!r||r===e?[e,i]:[e,r+" "+i]:(typeof r=="string"&&r.length?d.set(e,r):d.set(e,null),[e,r])})),a=Object.fromEntries(Object.entries(a!=null?a:{}).map(function(f){var e=f[0],r=f[1],i=d.get(e);return i?!r||r===e?[e,i]:[e,r+" "+i]:(typeof r=="string"&&r.length?d.set(e,r):d.set(e,null),[e,r])}));function w(f){return f.map(function(e){var r;if(n&&typeof e=="string"){var i=e,s=n+" "+n+h();if((r=i.startsWith)===null||r===void 0?void 0:r.call(i,s))return i==null?void 0:i.slice(s.length);if(e===n||e===n+" "+u)return null}return e})}var B=Array.from(d.keys());function x(f){return f.map(function(e){if(typeof e=="string"){for(var r="",i=void 0,s=e;i=B.find(function(c){return s.startsWith(c)});)r+=i+" ",s=e.slice(r.length);return r.trim()}return e})}function A(f,e,r){return Object.fromEntries(Object.entries(a!=null?a:{}).map(function(i){var s=i[0],c=i[1],N=e+s;function m(p){var y="";return!arguments.length||p===!0||!config.strictBoolChecks&&p?(y=(f?f+" ":"")+N,r&&(y+=" "+r),c&&c!==s&&(y+=" "+c)):(y=f!=null?f:"",r&&(y+=" "+r)),y}return m.s=(f?f+" ":"")+N,r&&(m.s+=" "+r),c&&c!==s&&(m.s+=" "+c),[s,m]}))}var C=Object.fromEntries(Object.entries(t!=null?t:{}).map(function(f){var e=f[0],r=f[1],i=(n?n+g():"")+e;function s(){for(var c,N=[],m=0;m<arguments.length;m++)N[m]=arguments[m];var p=i,y="",z="";return N.length&&(c=normalizeClass.apply(void 0,__spreadArray([config,d,p+h()],x(w(N)),!1)),y=c[0],z=c[1],y.length&&(p+=" "+y)),r&&r!==e&&(p+=" "+r),z.length&&(p+=" "+z),p}return s.s=i,r&&r!==e&&(s.s+=" "+r),Object.assign(s,A(i,i+h(),r&&r!==e?r:null)),[e,s]}));function j(){for(var f,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=n!=null?n:"",s="",c="";return e.length&&(f=normalizeClass.apply(void 0,__spreadArray([config,d,i+h()],x(w(e)),!1)),s=f[0],c=f[1],s.length&&(i+=" "+s)),u&&(i+=" "+u),c.length&&(i+=" "+c),i}return j.s=(n!=null?n:"")+(u?" "+u:""),Object.defineProperty(j,"name",{value:n,writable:!1}),n&&Object.defineProperty(j,n,{value:j,writable:!1}),Object.assign(j,C),Object.assign(j,A(n,n?n+h():"",u)),j}exports.default=enss;function normalizeClass(v,t,a){for(var o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];for(var g="",h=[],O=0,S=o;O<S.length;O++){var n=S[O];if(n)if(typeof n=="string"||n instanceof String){g+=a+n.trim()+" ";var u=t==null?void 0:t.get(n);(u==null?void 0:u.length)&&(typeof u=="string"||u instanceof String)&&h.push(u.trim())}else{if(Array.isArray(n))throw new Error("ENSS Error: Spread arrays instead of passing directly, eg. cc.mycls(...myarr) instead of cc.mycls(myarr)");var b=void 0;try{b=Object.entries(n)}catch(C){b=null}if(!(b==null?void 0:b.length))throw new Error("ENSS Error: Invalid input ".concat(JSON.stringify(n),"."));for(var d=0,w=b;d<w.length;d++){var B=w[d],x=B[0],A=B[1];if(A===!0||!v.strictBoolChecks&&A){g+=a+x.trim()+" ";var u=t==null?void 0:t.get(x);(u==null?void 0:u.length)&&(typeof u=="string"||u instanceof String)&&h.push(u.trim())}}}}return[g.trim(),h.reverse().join(" ")]}exports.normalizeClass=normalizeClass;function omitEnumReverseMappings(v){return v&&Object.fromEntries(Object.entries(v).filter(function(t){var a=t[0];return!Number.isInteger(Number(a))}).map(function(t){var a=t[0],o=t[1];return[a,Number.isInteger(Number(o))?null:o]}))}exports.omitEnumReverseMappings=omitEnumReverseMappings;function extractNameEnumData(v,t){var a,o=null,l=null;if(v&&typeof v=="object"){var g=Object.entries(v);if(g.length>1)throw new Error("ENSS Error: Invalid name enum provided; should have at most 1 field.");g.length===1&&(a=g[0],o=a[0],l=a[1])}if(o&&t&&typeof t=="object"){var h=Object.prototype.hasOwnProperty.call(t,o)&&t[o];h&&(l=(l?l+" ":"")+h)}return[o,l]}exports.extractNameEnumData=extractNameEnumData,enss.configure=function(v){Object.assign(config,v===null?defaultConfig:v)};
